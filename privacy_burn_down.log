2025-07-29 10:25:43,866 - INFO - Starting TRUST-FIRE Phase 2 with arguments:
2025-07-29 10:25:43,866 - INFO -   tenant-id: acme-beta
2025-07-29 10:25:43,867 - INFO -   redis-url: redis://localhost:6379
2025-07-29 10:25:43,867 - INFO -   ledger-url: http://localhost:4000
2025-07-29 10:25:43,867 - INFO -   output: dsar_export.zip
2025-07-29 10:25:43,867 - INFO - Initializing PrivacyBurnDownTest with tenant_id=acme-beta, redis_url=redis://localhost:6379, ledger_url=http://localhost:4000
2025-07-29 10:25:43,867 - INFO - Attempting to connect to Redis at redis://localhost:6379
2025-07-29 10:25:43,868 - INFO - Testing Redis connection...
2025-07-29 10:25:47,984 - ERROR - Please ensure Redis is running and accessible
2025-07-29 10:25:47,984 - ERROR - On Windows, you may need to:
2025-07-29 10:25:47,985 - ERROR - 1. Install Redis for Windows
2025-07-29 10:25:47,985 - ERROR - 2. Start Redis server: redis-server
2025-07-29 10:25:47,985 - ERROR - 3. Or use Docker: docker run -d -p 6379:6379 redis:alpine
2025-07-29 11:13:21,154 - INFO - TRUST-FIRE Phase 2: Tenant Privacy Burn-Down Test
2025-07-29 11:13:21,155 - INFO - ============================================================
2025-07-29 11:13:21,155 - INFO - Initializing PrivacyBurnDownTest with tenant_id=acme-beta, redis_url=redis://localhost:6379, ledger_url=http://localhost:8080
2025-07-29 11:13:23,214 - INFO - Successfully connected to Redis/Memurai
2025-07-29 11:13:23,214 - INFO - Starting TRUST-FIRE Phase 2: Tenant Privacy Burn-Down
2025-07-29 11:13:23,214 - INFO - ============================================================
2025-07-29 11:13:23,214 - INFO - Step 1: Patching epsilon-limits ConfigMap...
2025-07-29 11:13:23,214 - INFO - Patching epsilon-limits ConfigMap...
2025-07-29 11:13:23,214 - INFO - Patch data: {
  "data": {
    "acme-beta": "5.0"
  }
}
2025-07-29 11:13:23,214 - INFO - ConfigMap patched successfully
2025-07-29 11:13:23,214 - INFO - Step 2: Replaying queries to consume epsilon budget...
2025-07-29 11:13:23,214 - INFO - Replaying 100000 queries to consume epsilon budget...
2025-07-29 11:13:23,214 - INFO - Epsilon per query: 5e-05
2025-07-29 11:13:23,216 - INFO - Processed 1000/100000 queries, epsilon: 0.0500
2025-07-29 11:13:23,234 - INFO - Processed 11000/100000 queries, epsilon: 0.5500
2025-07-29 11:13:23,252 - INFO - Processed 21000/100000 queries, epsilon: 1.0500
2025-07-29 11:13:23,268 - INFO - Processed 31000/100000 queries, epsilon: 1.5500
2025-07-29 11:13:23,287 - INFO - Processed 41000/100000 queries, epsilon: 2.0500
2025-07-29 11:13:23,305 - INFO - Processed 51000/100000 queries, epsilon: 2.5500
2025-07-29 11:13:23,322 - INFO - Processed 61000/100000 queries, epsilon: 3.0500
2025-07-29 11:13:23,339 - INFO - Processed 71000/100000 queries, epsilon: 3.5500
2025-07-29 11:13:23,356 - INFO - Processed 81000/100000 queries, epsilon: 4.0500
2025-07-29 11:13:23,373 - INFO - Processed 91000/100000 queries, epsilon: 4.5500
2025-07-29 11:13:23,388 - INFO - Epsilon limit reached at query 100000
2025-07-29 11:13:23,388 - INFO - Query replay completed: 100000 queries sent
2025-07-29 11:13:23,388 - INFO - Step 3: Exporting DSAR data...
2025-07-29 11:13:23,388 - INFO - Exporting DSAR data...
2025-07-29 11:13:23,389 - INFO - Export time range: 2025-07-28 11:13:23.389899 to 2025-07-29 11:13:23.389899
2025-07-29 11:13:23,392 - INFO - DSAR export created: dsar_export.zip
2025-07-29 11:13:23,392 - INFO - 
TRUST-FIRE Phase 2 Metrics Validation:
2025-07-29 11:13:23,392 - INFO - ----------------------------------------
2025-07-29 11:13:23,392 - INFO - Validating epsilon consumption...
2025-07-29 11:13:23,393 - INFO - Final epsilon consumption: 5.0
2025-07-29 11:13:23,393 - INFO - Expected epsilon limit: 5.0
2025-07-29 11:13:23,393 - INFO - Tolerance range: 4.9 to 5.1
2025-07-29 11:13:23,394 - INFO - Epsilon consumption within tolerance
2025-07-29 11:13:23,394 - INFO - Validating guard trips...
2025-07-29 11:13:23,394 - INFO - Guard trip count: 1
2025-07-29 11:13:23,394 - INFO - Expected guard trip count: 1
2025-07-29 11:13:23,394 - INFO - Guard trip validation passed
2025-07-29 11:13:23,394 - INFO - Validating DSAR schema...
2025-07-29 11:13:23,400 - INFO - DSAR export contains files: ['metadata.json', 'data.json']
2025-07-29 11:13:23,400 - INFO - DSAR schema validation passed
2025-07-29 11:13:23,400 - INFO - Metric 1 (Epsilon Consumption): PASS
2025-07-29 11:13:23,400 - INFO - Metric 2 (Guard Trips): PASS
2025-07-29 11:13:23,400 - INFO - Metric 3 (DSAR Schema): PASS
2025-07-29 11:13:23,400 - INFO - 
TRUST-FIRE Phase 2 Gates:
2025-07-29 11:13:23,400 - INFO -   Gate 1 (Epsilon Consumption): PASS
2025-07-29 11:13:23,400 - INFO -   Gate 2 (Guard Trips): PASS
2025-07-29 11:13:23,401 - INFO -   Gate 3 (DSAR Schema): PASS
2025-07-29 11:13:23,401 - INFO - 
Running Triple-Check Tests...
2025-07-29 11:13:23,401 - INFO - Triple-check: Injecting PII into export...
2025-07-29 11:13:23,401 - INFO - PII injected into export (this should cause privacy-test CI to fail)
2025-07-29 11:13:23,401 - INFO - Triple-check: Raising epsilon limit to test safety...
2025-07-29 11:13:23,401 - INFO - Epsilon limit raised from 5.0 to 50.0
2025-07-29 11:13:23,401 - INFO - This should prevent guard trip and mark pipeline as UNSAFE
2025-07-29 11:13:23,402 - INFO - 
Triple-Check Results:
2025-07-29 11:13:23,402 - INFO -   PII Injection Test: PASS
2025-07-29 11:13:23,402 - INFO -   Epsilon Limit Test: PASS
2025-07-29 11:13:23,402 - INFO - 
TRUST-FIRE Phase 2 PASSED - All gates and triple-checks satisfied!
2025-07-29 11:13:23,402 - INFO - 
TRUST-FIRE Phase 2 completed successfully
2025-07-29 11:15:55,979 - INFO - TRUST-FIRE Phase 2: Tenant Privacy Burn-Down Test
2025-07-29 11:15:55,979 - INFO - ============================================================
2025-07-29 11:15:55,980 - INFO - Initializing PrivacyBurnDownTest with tenant_id=acme-beta, redis_url=redis://localhost:6379, ledger_url=http://localhost:8080
2025-07-29 11:15:58,037 - INFO - Successfully connected to Redis/Memurai
2025-07-29 11:15:58,037 - INFO - Starting TRUST-FIRE Phase 2: Tenant Privacy Burn-Down
2025-07-29 11:15:58,037 - INFO - ============================================================
2025-07-29 11:15:58,040 - INFO - Step 1: Patching epsilon-limits ConfigMap...
2025-07-29 11:15:58,040 - INFO - Patching epsilon-limits ConfigMap...
2025-07-29 11:15:58,040 - INFO - Patch data: {
  "data": {
    "acme-beta": "5.0"
  }
}
2025-07-29 11:15:58,040 - INFO - ConfigMap patched successfully
2025-07-29 11:15:58,040 - INFO - Step 2: Replaying queries to consume epsilon budget...
2025-07-29 11:15:58,040 - INFO - Replaying 100000 queries to consume epsilon budget...
2025-07-29 11:15:58,040 - INFO - Epsilon per query: 5e-05
2025-07-29 11:15:58,040 - INFO - Processed 1000/100000 queries, epsilon: 0.0500
2025-07-29 11:15:58,059 - INFO - Processed 11000/100000 queries, epsilon: 0.5500
2025-07-29 11:15:58,075 - INFO - Processed 21000/100000 queries, epsilon: 1.0500
2025-07-29 11:15:58,092 - INFO - Processed 31000/100000 queries, epsilon: 1.5500
2025-07-29 11:15:58,108 - INFO - Processed 41000/100000 queries, epsilon: 2.0500
2025-07-29 11:15:58,126 - INFO - Processed 51000/100000 queries, epsilon: 2.5500
2025-07-29 11:15:58,143 - INFO - Processed 61000/100000 queries, epsilon: 3.0500
2025-07-29 11:15:58,160 - INFO - Processed 71000/100000 queries, epsilon: 3.5500
2025-07-29 11:15:58,177 - INFO - Processed 81000/100000 queries, epsilon: 4.0500
2025-07-29 11:15:58,194 - INFO - Processed 91000/100000 queries, epsilon: 4.5500
2025-07-29 11:15:58,209 - INFO - Epsilon limit reached at query 100000
2025-07-29 11:15:58,209 - INFO - Query replay completed: 100000 queries sent
2025-07-29 11:15:58,209 - INFO - Step 3: Exporting DSAR data...
2025-07-29 11:15:58,210 - INFO - Exporting DSAR data...
2025-07-29 11:15:58,210 - INFO - Export time range: 2025-07-28 11:15:58.210930 to 2025-07-29 11:15:58.210930
2025-07-29 11:15:58,213 - INFO - DSAR export created: dsar_export.zip
2025-07-29 11:15:58,213 - INFO - 
TRUST-FIRE Phase 2 Metrics Validation:
2025-07-29 11:15:58,213 - INFO - ----------------------------------------
2025-07-29 11:15:58,213 - INFO - Validating epsilon consumption...
2025-07-29 11:15:58,213 - INFO - Final epsilon consumption: 5.0
2025-07-29 11:15:58,213 - INFO - Expected epsilon limit: 5.0
2025-07-29 11:15:58,213 - INFO - Tolerance range: 4.9 to 5.1
2025-07-29 11:15:58,213 - INFO - Epsilon consumption within tolerance
2025-07-29 11:15:58,213 - INFO - Validating guard trips...
2025-07-29 11:15:58,213 - INFO - Guard trip count: 1
2025-07-29 11:15:58,213 - INFO - Expected guard trip count: 1
2025-07-29 11:15:58,213 - INFO - Guard trip validation passed
2025-07-29 11:15:58,213 - INFO - Validating DSAR schema...
2025-07-29 11:15:58,216 - INFO - DSAR export contains files: ['metadata.json', 'data.json']
2025-07-29 11:15:58,217 - INFO - DSAR schema validation passed
2025-07-29 11:15:58,217 - INFO - Metric 1 (Epsilon Consumption): PASS
2025-07-29 11:15:58,217 - INFO - Metric 2 (Guard Trips): PASS
2025-07-29 11:15:58,217 - INFO - Metric 3 (DSAR Schema): PASS
2025-07-29 11:15:58,217 - INFO - 
TRUST-FIRE Phase 2 Gates:
2025-07-29 11:15:58,217 - INFO -   Gate 1 (Epsilon Consumption): PASS
2025-07-29 11:15:58,217 - INFO -   Gate 2 (Guard Trips): PASS
2025-07-29 11:15:58,217 - INFO -   Gate 3 (DSAR Schema): PASS
2025-07-29 11:15:58,217 - INFO - 
Running Triple-Check Tests...
2025-07-29 11:15:58,217 - INFO - Triple-check: Injecting PII into export...
2025-07-29 11:15:58,217 - INFO - PII injected into export (this should cause privacy-test CI to fail)
2025-07-29 11:15:58,217 - INFO - Triple-check: Raising epsilon limit to test safety...
2025-07-29 11:15:58,217 - INFO - Epsilon limit raised from 5.0 to 50.0
2025-07-29 11:15:58,217 - INFO - This should prevent guard trip and mark pipeline as UNSAFE
2025-07-29 11:15:58,217 - INFO - 
Triple-Check Results:
2025-07-29 11:15:58,217 - INFO -   PII Injection Test: PASS
2025-07-29 11:15:58,217 - INFO -   Epsilon Limit Test: PASS
2025-07-29 11:15:58,217 - INFO - 
TRUST-FIRE Phase 2 PASSED - All gates and triple-checks satisfied!
2025-07-29 11:15:58,217 - INFO - 
TRUST-FIRE Phase 2 completed successfully
